<h1>Kcalculator</h1>

<div>
    <div id="ingredients-list">
        <datalist id="ingredients-all">
            {% for ingredient in ingredients %}
                <option value="{{ ingredient }}">{{ ingredient }}</option>
            {% endfor %}
        </datalist>
        <div>
            <form id="ingredients-form"  hx-get="/calculator/calculate" hx-trigger="input change" hx-target="#total" hx-swap="innerHTML" hx-include="#ingredients-form">
                {% csrf_token %}
                <div class="ingredients-row">
                    <input 
                    class="ingredient-input" type="text" name="ingredients[]" list="ingredients-all" placeholder="ingredient"
                    hx-trigger="input" hx-get="/calculator/get-units" hx-target="next .unit-input" hx-swap="outerHTML" hx-include="this"
                    >
                    <input class="volume-input" type="text" name="volumes[]" placeholder="volume">
                    <input class="unit-input" type="text" name="units[]" placeholder="unit">
                    <button hx-target="closest .ingredients-row" hx-swap="outerHTML" hx-delete="/calculator/delete-row">Delete</button><br>
                </div>
                <button hx-get="/calculator/add-ingredient" hx-trigger="click" hx-target="this" hx-swap="outerHTML">Add</button>
            </form>
            <button hx-get="/calculator/calculate" hx-trigger="click" hx-target="#total" hx-swap="innerHTML" hx-include="#ingredients-form">Calculate</button>
            <hr>
            <p id="total">Total: -</p>
        </div>
    </div>

</div>